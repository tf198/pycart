{% extends "pyhub/interface.html" %}
{% load repo %}

{% block content %}

<div class="navbar navbar-default">

	<div>
		<ul class="nav navbar-nav">
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					<i class="glyphicon glyphicon-random"></i> &nbsp; branch: <b>{{ branch }}</b> <b class="caret"></b></a>
				<ul class="dropdown-menu">
					{% for i in branches %}
					<li><a href="{% url 'repo_tree' branch=i path=path %}">{{ i }}</a></li>
					{% endfor %}
				</ul>
			</li>
		</ul>
		<p class="navbar-text">
			<a class="navbar-link" href="{% url 'repo_tree' branch=branch path="" %}">{{ repo }}</a>
			{% for p in breadcrumbs %}
				/
				{% if not forloop.last %}<a class="navbar-link" href="{% for i in ''|ljust:forloop.revcounter0 %}../{% endfor %}{{ p }}">{% endif %}
				{{ p }}
				{% if not forloop.last %}</a>{% endif %}
			{% endfor %}
		</p>
	</div>
</div>

{% if commit %}
<div class="panel panel-info">

	<div class="panel-heading">
		{{ commit.message }}
	</div>

	<div class="panel-body">
		<span class="pull-right"><small>commit {{ commit.id|commit_link }}</small></span>
		{{ commit.author|author_gravatar }} <small>{{ commit.author|author_link }} authored {{ commit.commit_time|timestamp|timesince }} ago</small>
	</div>

	<table class="table table-condensed">
	{% for name, message, time in listing %}
		<tr>
			<td><a href="{{ request.path }}/{{ name }}">{{ name }}</a></td>
			<td>{{ message }}</td>
			<td class="min">{{ time|timesince }} ago</td>
		</tr>
	{% endfor %}
	</table>

</div>
{% endif %}

{% if data %}
<div class="panel panel-default">
	<div class="panel-heading">
		{{ path }}
	</div>
	<pre class="panel-body" style="background-color: white; border: none;">{{ data }}</pre>
</div>
{% endif %}

{% endblock %}
